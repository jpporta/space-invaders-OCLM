TITLE	BALL
.MODEL	small
.STACK	1000H
PRINTA_OBJETO	MACRO	MATRIZ, COR, XI, YI, LARGURA, TOTAL
	PUSH 	CX
	PUSH	SI
	;ZERANDO VARIAVEIS, PARA NAO TER NEHUMA INTERFERENCIA
	MOV	X_INICIO,0
	MOV	Y_INICIO, 0
	MOV	TOTAL_M,0
	MOV	LARGURA_M,0
	XOR	SI,SI

	;INICIALIZANDO VARIAVEIS PARA CHAMAR PROCESIMENTO
	MOV	AL, COR
	MOV	X_INICIO, XI
	MOV	Y_INICIO, YI
	MOV	TOTAL_M, TOTAL
	MOV	LARGURA_M, LARGURA
	LEA	SI, MATRIZ

	;CHAMAR PROC 'DISPLAY'
	CALL	 DISPLAY_OBJ

	POP	SI
	POP 	CX

	ENDM
.DATA
MSG 	DB	0AH,0AH,0DH,'     ','Bem vindo ao Space Invaders$',0AH,0DH

MSG1	DB	0AH,0AH,0AH,0AH,0AH,,0AH,0AH,0DH,'  ','Pressione Espaco para comecar o jogo',0AH,0DH,'$'

MSG2	DB	0AH,0AH,0AH,'Instrucao: ',0AH,0AH,0AH,0DH, 'Utilize "a" e "d" para movimentar a nave', 0AH,0AH,0AH,0DH, 'Espaco para atirar',0AH,0AH,0AH,0DH, 'Esc para sair do jogo $'

MSG3	DB	'        $'

MSG4	DB	0AH,0AH, '        ','GAME OVER!!!1!',0AH,0AH,'      ','JOGAR NOVAMENTE(S/N) $'

BLOCO_1010	DB 	1,1,1,1,1,1,1,1,1,1
		DB 	1,1,1,1,1,1,1,1,1,1
		DB 	1,1,1,1,1,1,1,1,1,1
		DB 	1,1,1,1,1,1,1,1,1,1
		DB 	1,1,1,1,1,1,1,1,1,1
		DB 	1,1,1,1,1,1,1,1,1,1
		DB 	1,1,1,1,1,1,1,1,1,1
		DB 	1,1,1,1,1,1,1,1,1,1
		DB 	1,1,1,1,1,1,1,1,1,1
		DB 	1,1,1,1,1,1,1,1,1,1


CORACAO1	DB	0,0,0,0,0,0,0,0,0
	DB	0,1,1,1,0,1,1,1,0
	DB	1,1,1,1,1,1,1,1,1
	DB	1,1,1,1,1,1,1,1,1
	DB	0,1,1,1,1,1,1,1,0
	DB	0,0,1,1,1,1,1,0,0
	DB	0,0,0,0,1,0,0,0,0
	;PRINTA_OBJETO	CORACAO, 39, X, Y, 9, 63

CORACA02	DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DB	0,1,1,1,0,1,1,1,0,0,0,1,1,1,0,1,1,1,0
	DB	1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1
	DB	1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1
	DB	0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0
	DB	0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0
	DB	0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0

CORACAO3	DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DB	0,1,1,1,0,1,1,1,0,0,0,1,1,1,0,1,1,1,0,0,0,1,1,1,0,1,1,1,0
	DB	1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1
	DB	1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1
	DB	0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0
	DB	0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0
	DB	0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0


SCORE	DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DB	0,1,1,1,1,0,0,1,1,1,0,0,1,1,0,0,1,1,1,0,0,1,1,1,1,1
	DB	1,0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,1,0,0,1,0,1,0,0,0,0
	DB	0,1,1,1,0,0,1,0,0,0,0,1,0,0,1,0,1,1,1,0,0,1,1,1,1,0
	DB	0,0,0,0,1,0,1,0,0,0,0,1,0,0,1,0,1,0,0,1,0,1,0,0,0,0
	DB	1,1,1,1,0,0,0,1,1,1,0,0,1,1,0,0,1,0,0,1,0,1,1,1,1,1
	;PRINTA_OBJETO	SCORE, 15, X, Y, 26, 156

GORDO	DB	0,0,0,0,1,1,1,1,0,0,0,0
	DB	0,1,1,1,1,1,1,1,1,1,1,0
	DB	1,1,1,1,1,1,1,1,1,1,1,1
	DB	1,1,1,0,0,1,1,0,0,1,1,1
	DB	1,1,1,1,1,1,1,1,1,1,1,1
	DB	0,0,0,1,1,0,0,1,1,0,0,0
	DB	0,0,1,1,0,1,1,0,1,1,0,0
	DB	1,1,0,0,0,0,0,0,0,0,1,1

	;PRINTA_OBJETO	GORDO, 15, X, Y, 11, 88



ALIEN	DB	0,0,1,0,0,0,0,0,1,0,0
	DB	0,0,0,1,0,0,0,1,0,0,0
	DB	0,0,1,1,1,1,1,1,1,0,0
	DB	0,1,1,0,1,1,1,0,1,1,0
	DB	1,1,1,1,1,1,1,1,1,1,1
	DB	1,0,1,1,1,1,1,1,1,0,1
	DB	1,0,1,0,0,0,0,0,1,0,1
	DB	0,0,0,1,1,0,1,1,0,0,0
	;PRINTA_OBJETO	ALIEN, 15, X , Y, 11, 88


LULA	DB	0,0,0,1,1,0,0,0
	DB	0,0,1,1,1,1,0,0
	DB	0,1,1,1,1,1,1,0
	DB	1,1,0,1,1,0,1,1
	DB	1,1,1,1,1,1,1,1
	DB	0,0,1,0,0,1,0,0
	DB	0,1,0,1,1,0,1,0
	DB	1,0,1,0,0,1,0,1

	;PRINTA_OBJETO	lula, 15, X, Y, 8, 64
BARREIRA	DB	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
	DB	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	DB	1,0,1,1,1,1,1,1,1,0,1,1,0,0,1,1,1,1,0,1
	DB	1,0,0,1,0,1,0,1,1,0,1,1,1,1,1,1,0,1,0,1
	DB	1,0,0,1,0,1,1,0,1,0,1,1,0,0,1,1,1,1,0,1
	DB	1,0,0,1,0,1,0,1,1,0,1,1,0,0,1,1,0,0,0,1
	DB	1,0,0,1,0,1,0,1,1,1,1,1,0,0,1,1,0,0,0,1
	DB	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	DB	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1

BARREIRA_D DB	1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0
	DB	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DB	0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0
	DB	1,0,0,1,0,1,0,1,1,0,0,0,0,0,1,0,0,0,0,0
	DB	1,0,0,1,0,1,1,0,1,0,1,1,0,0,1,1,1,1,0,1
	DB	1,0,0,1,0,1,0,1,1,0,1,1,0,0,1,1,0,0,0,1
	DB	1,0,0,1,0,1,0,1,1,1,1,1,0,0,1,1,0,0,0,1
	DB	1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
	DB	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1

PLAYER	DB	0,0,0,0,1,0,0,0,0
	DB	0,0,0,1,1,1,0,0,0
	DB	0,0,0,1,1,1,0,0,0
	DB	0,0,1,1,1,1,1,0,0
	DB	0,0,1,1,1,1,1,0,0
	DB	0,1,1,1,0,1,1,1,0
	DB	1,1,1,0,0,0,1,1,1
	DB	0,0,0,0,0,0,0,0,0

; STATUS_BARREIRA	DB	21,0,0,0,0,0,0,0,0,0,0,0,33,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,98,0,0,98,0,0,98,0,0,98,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0


MATRIZ_LOGICA	DB	21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0
		DB	2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0
		DB	2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0
		DB	3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,0,0,0,0,0,0,0,0,0,0
		DB	3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		DB	0,0,0,98,0,0,0,0,98,0,0,0,0,98,0,0,0,0,98,0,0,0,0,98,0,0,0,0,0,0,0,0
		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25
		DB	99,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,24
		DB	24

; PLAYER_MOVIMENTO	DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	99,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0

; LIMPA_TELA	DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51
; 		DB	51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51

VEL_X	DW	0
VEL_Y	DW	0
IX	DW	0
IY	DW	0
X	DW	0
Y	DW	0
;inicio de variaveis utilizadas pelo PRINTA_OBJETO; NAO MUDAR;;;;;;;;;;;;;;;;;;;
LARGURA_M	DW	0
TOTAL_M	DW	0
X_INICIO	DW	0
Y_INICIO	DW	0
LADO_X	DW	0
LADO_Y	DW	0
COUNT	DW	0
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
SCORE_SOMADOR	DB	0

.CODE

MAIN	PROC; inicio do programa ---------------------------------------------------
	CALL	SET_DISPLAY_MODE ;INICIALIZA MODO GRAFICO
	MOV 	AX,@DATA	;INICIALIZA DATA
	MOV 	DS,AX
;;;;;;;;;;;;;;;;;;INCIO MENU ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
INICIOMENU:
	LEA 	DX,MSG		;Le mensagem de saudações
	MOV 	AH,9
	INT 	21h


	LEA 	DX,MSG2
	MOV 	AH,9
	INT 	21H

	LEA 	DX,MSG1 	;Le mensagem informando o usuario que precisa pressionar o espaço para começar o jogo
	MOV 	AH,9
	INT 	21h




	MOV 	AH,1
	INT 	21h
	CMP	AL, 27
	JE	FIM_MAIN
	CMP 	AL, ' ';compara o digitado com espaco
	JNE 	INICIOMENU
	CALL	SET_DISPLAY_MODE
	CALL	INICIO_GAME; comecao o jogo
;;;;;;;;;;;;;;;;;;;FIM MENU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
FIM_MAIN:	CALL	FIM

MAIN	ENDP;fim do programa---------------------------------------------------
INICIO_GAME	PROC

INICIO_GAME:

	CALL	PRINTA_TUDO

	MOV 	AX, 0100h
	INT	16h
	JZ	NAO_SAI


	MOV	AH, 07h
	INT 	21h

	CALL	MOVIMENTO_PLAYER

	CMP	AL,27
	JNE	NAO_SAI

	RET
NAO_SAI:
	CALL	LIMPA_PLAYER
	JMP	INICIO_GAME
	RET

INICIO_GAME	ENDP
MOVIMENTO_PLAYER	PROC
	CMP	AL,97
	JNE	NAO_ESQUERDA
	CALL	MOV_ESQUERDA
	RET

NAO_ESQUERDA:
	CMP	AL, 100
	JNE	NAO_DIREITA
	CALL	MOV_DIREITA

NAO_DIREITA:
	RET
MOVIMENTO_PLAYER	ENDP

LIMPA_PLAYER	PROC

	PUSH	AX
	PUSH	CX
	PUSH	DX

	MOV	AL, 0H
	MOV	CX,0
	MOV	DX,190

INICIO_LIMPATUDO:
	MOV	AH,0CH
	INT	10H

	INC	CX
	CMP	CX, 321
	JNE	INICIO_LIMPATUDO
	MOV	CX,0
	INC	DX
	CMP	DX,201
	JNE	INICIO_LIMPATUDO

	POP	DX
	POP	CX
	POP	AX


; tentativa empurrando a tela para baixo, porem por algum motivo a tela ESTA
; voltando para tela inicial
	; PUSH	AX
	; PUSH	BX
	; PUSH	CX
	; PUSH	DX
	; MOV	BH,07
	; MOV	CX,0
	; MOV	DH,200
	; MOV	DL,200
	; MOV	AL, 0
	; MOV	AH,07H
	;
	; INT	10H
	; PUSH	DX
	; PUSH	CX
	; PUSH	BX
	; POP	AX

	RET

LIMPA_PLAYER	ENDP

MOV_ESQUERDA	PROC
	PUSH	SI
	PUSH	BX
	XOR	SI,SI
	LEA	SI,MATRIZ_LOGICA
INICIO_MOV_ESQUERDA:
	INC	SI
	MOV	BX,[SI]
	CMP	BX,99
	JNE	INICIO_MOV_ESQUERDA

	MOV	BX,0
	MOV	[SI], BX

	DEC	SI
	MOV	BX,[SI]
	CMP	BX,25
	JNE	FIM_MOV_ESQUERDA
	INC	SI

FIM_MOV_ESQUERDA:
	MOV	BX,99
	MOV	[SI], BX

	POP	BX
	POP	SI
	RET

MOV_ESQUERDA	ENDP

MOV_DIREITA	PROC
	PUSH	SI
	PUSH	BX
	XOR	SI,SI
	LEA	SI,MATRIZ_LOGICA
INICIO_MOV_DIREITA:
	INC	SI
	MOV	BX,[SI]
	CMP	BX,99
	JNE	INICIO_MOV_DIREITA

	MOV	BX,0
	MOV	[SI], BX

	INC	SI
	MOV	BX,[SI]
	CMP	BX,25
	JNE	FIM_MOV_ESQUERDA
	DEC	SI

FIM_MOV_DIREITA:
	MOV	BX,99
	MOV	[SI], BX

	POP	BX
	POP	SI
	RET

MOV_DIREITA	ENDP

GAME_OVER		PROC
INICIO_GAMEOVER:
	LEA 	DX,MSG		;Le mensagem de GAME OVER
	MOV 	AH,9
	INT 	21h

	MOV 	AH,1
	INT 	21h
	CMP	AL, 115
	JNE	SAINDO_DO_GAMEOVER

	CALL	INICIO_GAME

SAINDO_DO_GAMEOVER:
	CMP	AL,110
	JNE	INICIO_GAMEOVER

	CALL	FIM

	RET
GAME_OVER		ENDP
FIM		PROC

	CALL	GAME_OVER
;RENICIALIZA O GRAPHIC DO DOS________________________________
	MOV	AH,0	;SET MODEL
	MOV	AL,3H	;MODE 0bh, 320X200 many COLOR
	INT	10H
	MOV	AH,0BH
	MOV	BH,1
	MOV	BL,1
	INT	10H
;______________________________________________________________

	MOV	AH, 4CH
	INT 	21H
FIM		ENDP



DISPLAY_OBJ		PROC ; funcao auxiliar para printar qualquer objeto------
	MOV	LADO_X,0
	MOV	LADO_Y,0
	MOV	COUNT,0

INICIO:
	MOV	CX, X_INICIO
	ADD	CX, LADO_X
	INC	LADO_X
	MOV	DX, Y_INICIO
	ADD	DX, LADO_Y

	MOV	BL, [SI]

	CMP	BL, 0
	JE	PRINT0

	MOV	AH, 0CH
	INT	10H

PRINT0:	INC	SI
	INC	COUNT

	MOV	BX, LARGURA_M
	CMP	LADO_X, BX
	JL	CONTINUA

	MOV	LADO_X, 0
	INC	LADO_Y

CONTINUA:	MOV	BX, TOTAL_M
	CMP	COUNT, BX
	JL	INICIO

	RET

DISPLAY_OBJ	ENDP;-------------------------------------------------------

SET_DISPLAY_MODE		PROC;funcao para mudar a o modo de video do dos box
	MOV	AH,0	;SET MODEL
	MOV	AL,13H	;MODE 0bh, 320X200 many COLOR
	INT	10H
	MOV	AH,0BH
	MOV	BH,1
	MOV	BL,1

	INT	10H

	RET
SET_DISPLAY_MODE	ENDP;-------------------------------------------------------

PRINTA_TUDO	PROC
	CALL	PRINTA_MATRIZ

PRINTA_TUDO	ENDP

PRINTA_MATRIZ	PROC
	PUSH	CX
	PUSH	DX
	MOV	X,0
	MOV	Y,0
	XOR	SI,SI
	LEA	SI,MATRIZ_LOGICA

	PUSH	BX
	CALL	PRINTA_MATRIZ_AUX
	POP	BX

	POP	CX
	POP	DX

	RET
PRINTA_MATRIZ	ENDP

PRINTA_MATRIZ_AUX		PROC;MATRIZ PARA PRINTAR O QUE ESTIVER NA MATRIZ LOGICA

	MOV	CX,X
	MOV	DX,Y

	MOV	BX,[SI]
	CMP	BX, 2
	JNE	FOWARD1
	PRINTA_OBJETO	ALIEN, 15, CX, DX, 11, 88
FOWARD1:
	CMP	BX,21
	JNE	FOWARD2
	PRINTA_OBJETO	SCORE, 15,CX,DX, 26, 156

FOWARD2:
	CMP	BX, 33
	JNE	FOWARD3
	PRINTA_OBJETO	CORACAO3, 39, CX, DX, 29, 203
FOWARD3:
	CMP	BX, 1
	JNE	FOWARD6
	PRINTA_OBJETO	LULA, 15, CX, DX, 8, 64
FOWARD6:
	CMP	BX, 3
	JNE	FOWARD7
	PRINTA_OBJETO	GORDO, 15, CX, DX, 12, 96
FOWARD7:
	CMP	BX, 32
	JNE	FOWARD8
	PRINTA_OBJETO	CORACA02, 39, CX, DX, 19, 133
FOWARD8:
	CMP	BX, 31
	JNE	FOWARD9
	PRINTA_OBJETO	CORACAO1, 39, CX, DX, 9, 63
FOWARD9:
	CMP	BX, 99
	JNE	FOWARD10
	PRINTA_OBJETO	PLAYER, 10, CX, DX, 9, 72
FOWARD10:
	CMP	BX, 98
	JNE	FOWARD11
	PRINTA_OBJETO	BARREIRA, 43, CX, DX, 20, 140
FOWARD11:
	CMP	BX, 97
	JNE	FOWARD12
	PRINTA_OBJETO	BARREIRA_D, 43, CX, DX, 20, 140
FOWARD12:
	CMP	BX, 100
	JNE	FOWARD13
	PRINTA_OBJETO	PLAYER, 0h, CX, DX, 9, 72
FOWARD13:

	INC	SI
	ADD	X,10
	CMP	X,320
	JNB	FOWARD4
	CALL	PRINTA_MATRIZ_AUX
FOWARD4:
	MOV	X,0
	ADD	Y,10
	CMP	Y,200
	JNB	FOWARD5
	CALL	PRINTA_MATRIZ_AUX
FOWARD5:


	RET
PRINTA_MATRIZ_AUX	ENDP

SCORE_SOMA	PROC

	PUSH	DX

	LEA 	DX,MSG2
	MOV 	AH,9
	INT		21h

	POP		DX

	CMP 	DX,1
	JE		ALIEN_1
	CMP 	DX,2
	JE 		ALIEN_2
	CMP 	DX,3
	JE		ALIEN_3

ALIEN_1:	ADD 	SCORE_SOMADOR,5d

ALIEN_2:	ADD 	SCORE_SOMADOR,2d

ALIEN_3:	ADD 	SCORE_SOMADOR,1d

SCORE_SOMA	ENDP

END	MAIN
